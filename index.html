<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <div id="app">
        <!-- <blog-post 
            :data="posts" 
            :style="{fontSize: postFont + 'em'}"
            @enlarge-text="postFont += $event"
            @click.native="postFont += 0.1"
        >
        </blog-post> -->
        <!-- <base-input @focus.native="onfocus"></base-input> -->
        <!-- <base-input @focus="onfocus" @blur="onblur"></base-input> -->

        <!-- <base-input1 :value="msg" @input="msg = $event"></base-input1> -->
        <!-- <base-input1 v-model="msg"></base-input1> -->
        <!-- <base-input2 v-model="check"></base-input2>
        <p>{{ check }}</p> -->

        <!-- <base-div v-model="num"></base-div>
        <p>{{ num }}</p> -->

        <!-- <base-input3 :value="num" @update:value="num = $event"></base-input3> -->
        <base-input3 :value.sync="num" :val.sync="msg"></base-input3>
        <p>{{ num }}</p>
        <p>{{ msg }}</p>
    </div>
    <script src="./vue.js"></script>
    <script>
        // 组件监听事件 博文组件
        // 自定义事件
        // $emit触发
        // 组件中的事件，没有事件对象
        // 组件上绑定原生事件 .native
        // $listeners属性
        // 组件中的v-model，也是语法糖 相当于绑定的是value属性并且监听的是input事件 
        // model
        // .sync
        Vue.component('blog-post', {
            props: {
                data: {
                    type: Array,
                    required: true
                }
            },
            template: `
                <div>
                    <div class="blog-post" v-for="item of data" :key="item.id">
                        <h3>{{ item.title }}</h3>
                        <button @click="$emit('enlarge-text', 0.2)">放大字体</button>
                        <div>{{ item.content }}</div>
                    </div>
                </div>
            `
        })
        // Vue.component('base-input', {
        //     methods: {
        //         onfocus() {
        //             console.log('获取焦点');
        //         }
        //     },
        //     mounted () {
        //         console.log(this.$listeners);
        //     },
        //     // template: `<input type="text" @focus="onfocus"/>`
        //     // template: `<input type="text" />`,
        //     template: `<label>
        //         姓名：
        //         <input type="text" v-on="$listeners" />
        //     </label>`
        // })
        // Vue.component('base-input1', {
        //     props: {
        //         value: {
        //             type: String,
        //             required: true
        //         }
        //     },
        //     template: `<input type="text" :value="value" @input="$emit('input', $event.target.value)"/>`
            
        // });
        // Vue.component('base-input2', {
        //     model: {
        //         prop: 'checked',
        //         event: 'change'
        //     },
        //     props: {
        //         checked: {
        //             type: Boolean,
        //             required: true
        //         }
        //     },
        //     template: `<input type="radio" :checked="checked" @change="$emit('change', $event.target.checked)"/>`
        // });
        // Vue.component('base-div', {
        //     model: {
        //         prop: 'num',
        //         event: 'change'
        //     },
        //     props: {
        //         // value: {
        //         //     type: [String, Number],
        //         //     required: true
        //         // }
        //         num: {
        //             type: [String, Number],
        //             required: true
        //         }
        //     },
        //     template: `<div @click="$emit('change', 1)">{{num}}</div>`
        // })
        Vue.component('base-input3', {
            props: {
                value: {
                    type: [String, Number],
                    required: true
                },
                val: {
                    type: [String, Number],
                    reuired: true
                }
            },
            template: `<input @input="$emit('update:value', $event.target.value)" :value="value" @change="$emit('update:val', $event.target.value)"/>`
        })
        const vm = new Vue({
            el: '#app',
            data: {
                posts: [
                    {
                        title: '标题1',
                        content: '正文内容1',
                        id: 0
                    },
                    {
                        title: '标题2',
                        content: '正文内容2',
                        id: 1
                    },
                    {
                        title: '标题3',
                        content: '正文内容3',
                        id: 2
                    }
                ],
                postFont: 1,
                msg: 'abc',
                check: false,
                num: 2
            },
            methods: {
                change(e) {
                    // console.log(e);
                    this.postFont += e;
                },
                onfocus() {
                    console.log('获取焦点');
                },
                onblur() {
                    console.log('失去焦点');
                }
            }
        });
    </script>
</body>

</html>